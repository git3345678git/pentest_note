# 被動偵察




## WHOIS
```
whois tryhackme.com
```


1. 註冊商：網域是透過哪一家註冊商註冊的？
2. 註冊人的聯絡資訊：姓名、組織、地址、電話等。（除非透過隱私服務隱藏）
3. 建立、更新和到期日期：網域首次註冊是什麼時候？上次更新是什麼時候？以及什麼時候需要更新？
4. 名稱伺服器：請求哪個伺服器來解析網域名稱？




TryHackMe.com 是什麼時候註冊的？
`20180705`

TryHackMe.com 的註冊商是什麼？
`namecheap.com`

TryHackMe.com 使用哪家公司作為名稱伺服器？
`cloudflare.com`




## nslookup




```
nslookup -type=A tryhackme.com
//查询与 "tryhackme.com" 相关联的 IPv4 地址。它返回 A（地址）记录。

nslookup -type=AAAA tryhackme.com
//查询与 "tryhackme.com" 相关联的 IPv6 地址。它返回 AAAA（IPv6 地址）记录。

nslookup -type=CNAME tryhackme.com
//tryhackme.com" 相关联的规范名称。它返回 CNAME（规范名称）记录，这是另一个域的别名。

nslookup -type=MX tryhackme.com
//查询与 "tryhackme.com" 相关联的邮件交换服务器。它返回 MX（邮件交换）记录

nslookup -type=SOA tryhackme.com
//。SOA 记录包含有关域的主 DNS 服务器和其他元数据的信息。

nslookup -type=TXT tryhackme.com
//TXT 记录可以包含任意文本，通常用于各种目的，如域验证或信息存储。
```



您可以選擇任何本機或公用 DNS 伺服器進行查詢。Cloudflare 提供1.1.1.1和1.0.0.1，Google 提供8.8.8.8和8.8.4.4，Quad9 提供9.9.9.9和149.112.112.112


```
nslookup -type=A tryhackme.com 1.1.1.1
```

```
Server:         1.1.1.1
Address:        1.1.1.1#53

Non-authoritative answer:
Name:   tryhackme.com
Address: 172.67.27.10
Name:   tryhackme.com
Address: 104.22.55.228
Name:   tryhackme.com
Address: 104.22.54.228
```

此命令正在请求位于 1.1.1.1 的 DNS 服务器获取 tryhackme.com 的 IPv4 地址。如果您在终端中运行此命令，它应该会为指定的域提供相应的 IPv4 地址。







```
nslookup -type=MX tryhackme.com
```


```
tryhackme.com   mail exchanger = 5 alt1.aspmx.l.google.com.
tryhackme.com   mail exchanger = 5 alt2.aspmx.l.google.com.
tryhackme.com   mail exchanger = 1 aspmx.l.google.com.
tryhackme.com   mail exchanger = 10 alt3.aspmx.l.google.com.
tryhackme.com   mail exchanger = 10 alt4.aspmx.l.google.com.
```

傳送電子郵件時@tryhackme.com，它將嘗試連接到aspmx.l.google.com
选择将域名的电子邮件流量定向到 Google 的邮件服务器可能是出于提高性能、可用性、安全性和协作功能等方面的考虑



## dig

dig： dig 是一个更灵活且功能更强大的工具，提供了更多的 DNS 查询选项和详细的输出。它支持多种查询类型，如A、MX、TXT、SOA等，而且输出格式更为结构化。

```
dig  tryhackme.com A

```



您可以選擇任何本機或公用 DNS 伺服器進行查詢。Cloudflare 提供1.1.1.1和1.0.0.1，Google 提供8.8.8.8和8.8.4.4，Quad9 提供9.9.9.9和149.112.112.112


```
dig @1.1.1.1 tryhackme.com A	
dig @1.1.1.1 tryhackme.com AAAA	 
dig @1.1.1.1 tryhackme.com CNAME	 
dig @1.1.1.1 tryhackme.com MX	 
dig @1.1.1.1 tryhackme.com SOA
dig @1.1.1.1 tryhackme.com TXT
```






## DNSDumpster


DNS 尋找工具（例如 nslookup 和 dig）無法自行尋找子網域


DNS 尋找工具（例如 nslookup 和 dig）無法自行尋找子網域。您正在檢查的網域可能包含不同的子網域，該子網域可以揭示有關目標的大量資訊。例如，如果 tryhackme.com 具有子網域 wiki.tryhackme.com 和 webmail.tryhackme.com，您想了解有關這兩個子網域的更多信息











## Shodan.io


當您負責針對特定目標執行滲透測試時，作為被動偵察階段的一部分，像Shodan.io這樣的服務可以幫助您了解有關客戶端網路的各種信息，而無需主動連接到它。此外，在防禦方面，您可以使用 Shodan.io 的不同服務來了解屬於您組織的已連接和公開的設備。