# 主動偵察


## Web Browser

**插件下載**

```
Proxy SwitchyOmega

User-Agent Switcher and Manager

Wappalyzer
```


**F12 查看JS**




## ping 


ping 是將 ICMP Echo 封包傳送到遠端系統的命令
```
ping -c 5 10.10.219.213

PING 10.10.219.213 (10.10.219.213) 56(84) bytes of data.
64 bytes from 10.10.219.213: icmp_seq=1 ttl=63 time=228 ms
64 bytes from 10.10.219.213: icmp_seq=2 ttl=63 time=232 ms
64 bytes from 10.10.219.213: icmp_seq=3 ttl=63 time=227 ms
64 bytes from 10.10.219.213: icmp_seq=4 ttl=63 time=227 ms
64 bytes from 10.10.219.213: icmp_seq=5 ttl=63 time=227 ms
```

如果遠端系統處於線上狀態，且 ping 封包已正確路由且未被任何防火牆阻止，則遠端系統應發回 ICMP 回顯應答



```
一般來說，當我們沒有收到 ping 回复時，有一些解釋可以解釋為什麼我們沒有收到 ping 回复，例如：

目標計算機沒有回應；可能仍在啟動或關閉，或作業系統已崩潰。

它已從網路中拔出，或路徑上的網路設備故障。

防火牆被配置為阻止此類資料包。防火牆可能是在系統本身上運作的軟體，也可能是單獨的網路設備。

請注意，MS Windows 防火牆預設會阻止 ping。
```



## Traceroute

**TTL 值為 64；經過4個路由器到達目標系統，TTL值為60。**

**系統將TTL設定為1,2,3,4.... 去探測路由。**

**記住每次路由不一定路線一樣**

**某些路由器被配置為在丟棄資料包時不發送此類 ICMP 訊息。**

**某些路由器會傳回公用 IP 位址。您可以根據預期滲透測試的範圍檢查其中一些路由器。**


```
 traceroute tryhackme.com
traceroute to tryhackme.com (172.67.27.10), 30 hops max, 60 byte packets
 1  RT-AC66U_B1-5D78 (192.168.50.1)  1.965 ms  1.734 ms  1.614 ms
 2  h254.s98.ts.hinet.net (168.95.98.254)  17.449 ms  17.500 ms  17.311 ms
 3  pcpc-3332.hinet.net (168.95.75.170)  17.450 ms  18.081 ms  17.935 ms
 4  tylc-3032.hinet.net (220.128.6.62)  19.073 ms  19.094 ms tylc-3032.hinet.net (220.128.5.74)  18.972 ms
 5  tyfo-4011.hinet.net (220.128.9.49)  18.810 ms tyfo-4011.hinet.net (220.128.9.69)  18.661 ms tyfo-4011.hinet.net (220.128.9.73)  18.880 ms
 6  r31-la.us.hinet.net (202.39.91.5)  149.411 ms  148.080 ms  148.628 ms
 7  r32-la.us.hinet.net (202.39.84.86)  145.203 ms  144.763 ms  144.833 ms
 8  141.101.72.250 (141.101.72.250)  146.289 ms  146.358 ms  147.044 ms
 9  162.158.184.3 (162.158.184.3)  151.082 ms 162.158.88.3 (162.158.88.3)  150.241 ms 141.101.72.32 (141.101.72.32)  152.065 ms
10  172.67.27.10 (172.67.27.10)  151.797 ms  151.888 ms  151.864 ms
  
```



```
traceroute tryhackme.com
traceroute to tryhackme.com (104.22.54.228), 30 hops max, 60 byte packets
 1  RT-AC66U_B1-5D78 (192.168.50.1)  1.378 ms  1.444 ms  1.476 ms
 2  h254.s98.ts.hinet.net (168.95.98.254)  16.617 ms  17.739 ms  17.717 ms
 3  pcpc-3332.hinet.net (168.95.23.94)  18.472 ms  18.590 ms  18.562 ms
 4  tylc-3032.hinet.net (220.128.6.62)  18.692 ms tylc-3032.hinet.net (220.128.5.74)  19.300 ms  19.787 ms
 5  tyfo-4011.hinet.net (220.128.9.49)  20.584 ms tyfo-4011.hinet.net (220.128.9.73)  20.433 ms tyfo-4011.hinet.net (220.128.9.69)  20.535 ms
 6  r31-la.us.hinet.net (202.39.91.5)  151.088 ms  148.278 ms  149.230 ms
 7  r32-la.us.hinet.net (202.39.84.86)  145.281 ms  144.794 ms  145.872 ms
 8  141.101.72.250 (141.101.72.250)  147.071 ms  147.740 ms  145.754 ms
 9  172.70.204.2 (172.70.204.2)  145.712 ms 141.101.72.32 (141.101.72.32)  163.155 ms 162.158.88.3 (162.158.88.3)  146.030 ms
10  104.22.54.228 (104.22.54.228)  145.475 ms  145.521 ms  145.735 ms

```





## Telnet

Telnet 用戶端依賴 TCP 協議，您可以使用 Telnet 連接到任何服務取banner

如果我們連接到郵件伺服器，我們需要根據協定使用適當的命令，例如 SMTP 和 POP3。

```
telnet 10.10.219.213 80


輸入頁面
GET / HTTP/1.1
GET /page.html HTTP/1.1


輸入host(隨意值) 並按兩次 Enter 鍵
host: example
```





```
telnet 10.10.219.213 80
Trying 10.10.219.213...
Connected to 10.10.219.213.
Escape character is '^]'.
GET / HTTP/1.1
host: example

HTTP/1.1 200 OK
Date: Mon, 25 Dec 2023 03:57:27 GMT
Server: Apache/2.4.10 (Debian)
Last-Modified: Mon, 30 Aug 2021 12:09:24 GMT
ETag: "15-5cac5b436ddfa"
Accept-Ranges: bytes
Content-Length: 21
Content-Type: text/html

Telnet to port 80...
Connection closed by foreign host.

```









## Netcat

**也可以做到上面的事連接到任何服務取banner**
```
nc 10.10.219.213 80
GET / HTTP/1.1

host: netcatHTTP/1.1 400 Bad Request
Date: Mon, 25 Dec 2023 04:04:14 GMT
Server: Apache/2.4.10 (Debian)
Content-Length: 308
Connection: close
Content-Type: text/html; charset=iso-8859-1

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>400 Bad Request</title>
</head><body>
<h1>Bad Request</h1>
<p>Your browser sent a request that this server could not understand.<br />
</p>
<hr>
<address>Apache/2.4.10 (Debian) Server at debra2.thm.local Port 80</address>
</body></html>

```


**作為伺服器，我們將監聽連接埠 1234**
```
nc -lvnp 1234
```

```
-l	聆聽模式
-p	指定連接埠號
-n	僅限數字；無法透過 DNS 解析主機名
-v	詳細輸出（可選，但對於發現任何錯誤很有用）
-vv	非常詳細（可選）
-k	客戶端斷開連線後繼續監聽
```