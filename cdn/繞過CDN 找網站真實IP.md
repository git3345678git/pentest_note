## 檢測CDN 存在

### CDN 檢測
https://www.cdnplanet.com/tools/cdnfinder/
https://digital.com/who-is-hosting-this/





### 多點 ping 檢測CDN
http://tools.ipip.net/ping.php
https://ping.chinaz.com/
https://ping.aizhan.com/
https://www.boce.com/ping/
https://tools.keycdn.com/ping


不同地方的DNS 查詢，查到不同IP 很有可能使用了CDN


### 其他資訊查詢CDN訊息:
https://mxtoolbox.com/
https://sitereport.netcraft.com/
https://www.accuwebhosting.com/
正解反解，都可能出現 cdn 字樣




### 同IP 不同站查詢:
https://www.webscan.cc/

同IP卻發現一堆不同站點，有可能都是使用了CDN




## 子域名找網站真實IP:

畢竟 CDN 不便宜的，子站點又跟主站在同一台服務器或者同一個C段內，此時就可以通過查詢子域名對應的 IP 來輔助查找網站的真實IP。



### 國外冷門DNS:
大部分CDN提供商只針對國內市場，而對國外市場幾乎是不做CDN，所以有很大的機率會直接解析到真實IP

要找國外冷門DNS才行，像谷歌的DNS，國內用的人越來越多了，很多CDN提供商都把谷歌DNS作為國內市場之一，所以，你查到的結果會和國內差不了多少


## DNS record:

```
https://viewdns.info/

https://www.dnsdb.io/

https://securitytrails.com/


```
在上CDN之前用的IP，很有可能就是CDN的真實源IP地址



## rss訂閱找網站真實IP：
使用郵件訂閱或RSS郵件訂閱的一種形式（大部分cdn不會防禦件訂閱或RSS訂閱的東西）

https://blog.51cto.com/u_15127601/2756870


## 網站功能
某些網站會需要上傳遠程頭像
如果是本地上傳就沒用。
如果是遠程加載圖片URL 就很有可能。
blog 網站會有寫文章放圖片，也是同樣原理。

如果是在直接在前端瀏覽器解析通常就是解析到攻擊者自己的IP
如果後端會保存，加載之類的功能，就會拿到受害者server IP。



## 漏洞
SSRF   
xss 請求外部
xxe OOB
mysql injection OOB
command injection
文件上傳 reverse shell




## Zmap 掃全網(沒試過)

要帶host頭





## 社工拿到CDN 管理員帳號


## DDoS 把 CDN 流量打光



## 通過ICO圖標哈希繞過CDN查找服務器真實IP 
https://zhuanlan.zhihu.com/p/510259214
https://www.sohu.com/a/457358551_488672

## HTML源代碼檢索查找IP
https://zhuanlan.zhihu.com/p/510259214



## F5 LTM解碼方法
https://zhuanlan.zhihu.com/p/510259214
https://juejin.cn/post/6992880981350809636
https://zhuanlan.zhihu.com/p/34945488
https://itw01.com/VCV6PE4.html




## 使用HTTP頭找到真正的原始IP
https://zhuanlan.zhihu.com/p/510259214



## 圖片logger
https://iplogger.org/

先把圖片URL 上傳到 iplogger產生新的URL

再利用郵件附上新的URL，如果是在mail客戶端解析的話，就能拿到IP。

ex:
gmail 會自動幫你上傳圖片到google的某格圖庫，然後收件人是從這google圖庫下載的，所以會失敗。





## 參考:
https://juejin.cn/post/6950953476796973069
https://www.cnblogs.com/qi-yuan/p/14066806.html
https://zhuanlan.zhihu.com/p/24396958
https://www.cnblogs.com/jsq16/p/5948849.html
https://blog.51cto.com/u_15127601/2756870
https://www.cnblogs.com/qi-yuan/p/14066806.html
https://segmentfault.com/a/1190000043667888
https://topic.alibabacloud.com/tc/a/11-ways-to-bypass-cdn-to-find-real-ip_8_8_31062138.html
https://zhuanlan.zhihu.com/p/510259214 (推薦)