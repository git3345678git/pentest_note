# CDN + 反代 + shared hosting 的架構



## A記錄對應的IP的幾種情況
```



IP 就是一台主機不用host取得web服務	 OK

IP 就是一台主機 要上特定 host才能取得web服務	OK


------------------------------------------------------------------

IP 就是一台 反向代理，反向代理跑去访问 私网上的 web 服務 判斷 host對應 web服務  OK

IP 就是一台 反向代理，反向代理跑去访问 公网上的 web 服務 判斷 host對應 web服務  OK


------------------------------------------------------------------



IP 就是一台 shared hosting 要加上對應的 host 才能取得對應 web服務

IP 就是一台 反向代理 需要host判斷  傳給 公網上的shared hosting 主機要加上host判斷才能取得不同的web服務    OK

IP 就是一台 反向代理 需要host判斷  傳給 私網上的shared hosting 主機要加上host判斷才能取得不同的web服務


------------------------------------------------------------------



IP 就是一台 cdn 主機 需要host判斷 跑去 一台公網上的主機不用host取得web服務

IP 就是一台 cdn 主機 需要host判斷 跑去 一台公網上的主機，要加上特定 host才能取得web服務

------------------------------------------------------------------


IP 就是一台 cdn 需要host判斷 CDN跑去 一台公網上的 shared hosting 主機，要加上host判斷才能取得不同的web服務

------------------------------------------------------------------


IP 就是一台 cdn 需要host判斷，CDN跑去访问一台公網上的反代，也是需要host，反向代理跑去访问 私网上的 web 服務 判斷 host對應 web服務 

IP 就是一台 cdn 需要host判斷，CDN跑去访问一台公網上的反代，也是需要host，反向代理跑去访问 公网上的 web 服務 判斷 host對應 web服務    OK


------------------------------------------------------------------

IP 就是一台 cdn 需要host判斷    CDN跑去访问一台公網上的反代,也是需要host   反向代理跑去访问 私网上的shared hosting 判斷 host對應 web服務   

IP 就是一台 cdn 需要host判斷    CDN跑去访问一台公網上的反代,也是需要host   反向代理跑去访问 公网上的shared hosting 判斷 host對應 web服務   OK
```


以上都有可能，OK代表常見。



### 如果 shared hosting有两个域名 a.com 和 b.com，+ 反代，其中一个想使用 CDN，另一个不想使用，你可以按照以下步骤进行操作：

1. **CDN 配置**：首先，在 CDN 提供商处配置你想要使用 CDN 的域名，例如 a.com。配置 CDN 加速服务并将该域名指向 CDN 提供商的服务器。

2. **反向代理设置**：在你的服务器上设置反向代理，将 CDN 服务作为后端，但只针对你想使用 CDN 的域名，即 a.com。这样，来自 CDN 的请求将被代理到你的 shared hosting 服务器上。

3. **域名配置**：确保你的域名 b.com 的 DNS 记录正确地指向你的 shared hosting 服务器，而不是 CDN 提供商的服务器。

通过这些步骤，只有域名 a.com 的流量将被 CDN 加速和缓存，而域名 b.com 的流量将直接传递到你的 shared hosting 服务器上，而无需经过 CDN。