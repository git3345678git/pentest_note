# dnsvalidator

* 通常搭配 dnsfaster 效果更好。
## 安裝
```
git clone https://github.com/vortexau/dnsvalidator.git
cd dnsvalidator
sudo python3 setup.py install
```

## 目的
当我们筛完 CDN 域名后，留下的都是正常域名，那么需要获得他们域名对应的 IP，后面用于端口扫描。获取 IP 难点在于 DNS 服务器需要快速准确解析域名，这旧要求要找到未劫持的 DNS 服务器，还得筛选出延迟最低的服务器。

目前 dnsvalidator 使用 public-dns.info 提供的 DNS 服务器 IP 作为数据源，验证 DNS 解析是否正确



找到纯净 DNS 服务器后需要测试其延迟，避免连接超时导致查询失败。還需要使用 dnsfaster，它既可以验证纯净也能做延迟测试。


## DNS劫持:
DNS劫持可能会导致用户被重定向到恶意网站、受到网络钓鱼攻击、个人信息泄露等安全风险















```
用法：dnsvalidator [-h] [-t 目标| -tL 目标列表] [-e 排除 | -eL 排除列表] [-o 输出]
                     [-r ROOTDOMAIN] [-q 查询] [-线程 THREADS] [-超时 TIMEOUT] [--no-color] [-v |  - 沉默的]

选项：
   -h, --help 显示此帮助消息并退出
   -t TARGET 指定要尝试解析的目标 DNS 服务器。
   -tL TARGET_LIST 指定要尝试解析的目标 DNS 服务器列表。 可能是一个文件，或者列表的 URL
   -e EXCLUSION 指定要从任何目标列表中删除的排除项。
   -eL EXCLUSIONS_LIST 指定要避免解析的排除列表。 可能是列表的文件或 URL
   -o 输出，--输出输出
                         将成功的 DNS 验证写入到的目标文件。
   -r ROOTDOMAIN 指定要比较的根域（默认值：
   -q QUERY 指定要使用的解析器查询（默认：dnsvalidator）
   -threads THREADS 指定要运行的最大线程数（默认值：5）
   -timeout TIMEOUT 命令超时（以秒为单位）（默认值：600）
   --no-color 如果设置，则任何前景色或背景色都将被去除。
   -v, --verbose 如果设置，则详细输出将显示在终端中。
   --silent 如果设置，则仅显示结果，并且横幅和其他信息将被编辑。
```



使用:
```
$ dnsvalidator -tL https://public-dns.info/nameservers.txt -threads 20 -o resolvers.txt



-tL https://public-dns.info/nameservers.txt：
使用 -tL 参数指定一个 URL，DNS Validator 将从这个 URL 中
获取 DNS 服务器列表。在这个例子中，DNS 服务器列表来自 
https://public-dns.info/nameservers.txt。

-threads 20：使用 -threads 参数指定线程数为 20，
这将同时使用 20 个线程来处理 DNS 服务器的列表，加快处理速度。

-o resolvers.txt：使用 -o 参数指定输出文件的名称为 resolvers.txt，
DNS Validator 将结果保存到这个文件中。
```



打印可用dns列表
```
cat -n resolvers.txt

     1  187.174.97.82
     2  95.211.66.25
     3  213.194.123.26
     4  91.135.26.9
     5  41.185.18.203
     6  200.54.146.103
     7  91.135.160.23
     8  152.32.75.84
     9  217.12.123.250
    10  162.159.46.28
    11  172.64.36.35
    12  172.64.36.177
    13  125.206.220.10
    14  202.46.34.76
    15  185.127.20.34
    16  37.251.160.252
    17  8.26.56.108
    18  186.97.157.218
    19  94.127.63.9
    20  217.65.3.81
    21  98.26.23.128
    22  49.0.82.21
    23  84.238.140.98
    24  113.160.232.172
    25  80.242.45.24
    26  8.26.56.99
    27  172.64.46.53
    28  134.73.180.152
    29  81.17.80.202
    30  194.186.246.234
    31  82.149.196.122

```
