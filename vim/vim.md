# vim






**Vim 中有三種基本模式：**

1. 命令 模式是您可以運行命令的地方。這是 Vim 啟動的預設模式
2. 插入 模式是您插入即寫入文字的地方
3. 可視 模式是您直觀地選擇一堆文本，以便您可以僅對文本的該部分運行命令/操作。




---

**确保你处于Normal模式。如果你正在编辑文本，按下Esc键确保你处于Normal模式
Vim中基本的光标移动命令。**

```
向左移动：按下小写字母"h"键。
向右移动：按下小写字母"l"键。
向上移动：按下小写字母"k"键。
向下移动：按下小写字母"j"键。
```

```
在 Vim 中，你可以使用以下命令将光标移动到文件的开头和结尾：

- 文件头：使用 `gg` 命令将光标移到文件的第一行。
- 文件尾：使用 `G` 命令将光标移到文件的最后一行。
```

```
跳到下一个单词的开头w
跳到上一个单词的开头b
```


```

下个单词的末尾 "e" 

1. `e`：将光标移动到当前单词的末尾。
2. `3e`：将光标移动到当前单词的末尾，但重复 3 次。
3. `ve`：从当前位置开始选中到当前单词的末尾。
4. `d3e`：从当前位置删除到当前单词的末尾，但重复 3 次。
5. `c2e`：从当前位置更改到当前单词的末尾，但重复 2 次。
6. `y2e`：从当前位置复制到当前单词的末尾，但重复 2 次。

这些命令可以帮助你在文本中快速导航和操作到单词的末尾。
```

---

**插入模式**
```
插入行首I
插入i
```


```
光标之后追加文本  "a" 键
行尾追加文本字母 "A" 键
```



```
当前光标所在行的下方新建一行字母 "o" 键。
当前行的上方插入一行，可以使用大写字母 "O" 键
```


---



**确保你处于 Normal 模式。如果你正在编辑文本，按下 Esc 键确保你处于 Normal 模式。
输入 :w 并按 Enter 键。这将保存文件但不退出 Vim**


```
如果你以 root 身份打开了一个文件，但希望保存更改并返回到普通用户身份而不退出 Vim，可以按照以下步骤：

确保你处于 Normal 模式。如果你正在编辑文本，按下 Esc 键确保你处于 Normal 模式。

输入 :w 并按 Enter 键。这将保存文件。

输入 :w !sudo tee % 并按 Enter 键。这会使用 sudo 权限保存文件。
:w 表示保存。
!sudo 表示使用 sudo 权限。
tee % 表示将文件内容写回文件。
```




**要写入文件并退出 Vim**
```
确保你在 Normal 模式。按下 Esc 键确保你处于 Normal 模式。

输入 :wq 并按 Enter 键。这将保存文件并退出 Vim。
输入 :x

這兩者基本等價。
```

---


**我們如何退出？**
```
确保你在 Normal 模式。按下 Esc 键确保你处于 Normal 模式。
:q


我們該如何強制退出？
:q!


所有文件，我們如何儲存並退出？
:wqa
:qa 表示退出 Vim 并关闭所有打开的窗口（不管它们是否有修改）。
```

---


**在 Vim 中，要复制一行，可以使用以下步骤：**

1. 确保你在 Normal 模式。按下 `Esc` 键确保你处于 Normal 模式。

2. 将光标移动到你想要复制的行。

3. 输入 `yy` 并按 Enter 键。这将复制当前行。

4. 将光标移动到你想要粘贴的位置。

5. 输入 `p` 并按 Enter 键。这将在光标下方粘贴复制的行。

如果你想在当前行的上方粘贴，可以使用 `P`（大写字母 "P"）而不是小写字母 "p"。这将在当前行的上方粘贴复制的行。



**複製與剪裁**
```
#1 我們如何複製一行？
    答案：yy
   
#2 我們如何複製 2 行？
    答案：2yy
   
#3 我們如何複製到行尾？
    答案：y$
   
#4 如何將剪貼簿內容貼到遊標後面？
    答案：p
   
#5 如何將剪貼簿內容貼到遊標之前？
    答案：P(大寫)
   
#6 我們如何剪線？
    答案：dd
   
#7 我們如何剪兩條線？
    答案：2dd
   
#8 我們如何切到行尾？
    答案：D
   
#9 我們如何剪切一個字？
    答：×
    
#10 複製到系統clipboard
    "+y    
    
```



---



**搜索與替換**
```
#1 我們如何向前搜尋模式（使用「模式」作為答案）
    答案：/
   
#2 我們如何向後搜尋模式（使用「模式」作為答案）
   ?
  
#3 我們如何在同一方向重複這個搜尋？
    答案：n


#4 我們如何在相反的方向重複這個搜尋？
    答案：N



#5 我們如何搜尋“舊”並將其替換為“新”
    答：:%s/old/new/g
```
   

**多個檔案中搜尋模式**
```vim
:vimgrep /pattern/g **/*.txt
```

上述命令中：
- `/pattern/` 是搜索的模式。
- `**/*.txt` 表示在当前目录及其子目录中的所有 `.txt` 文件中搜索。

这个命令将在多个文件中搜索匹配的模式，并将匹配结果显示在一个特殊的 Quickfix 窗口中，你可以使用 `:copen` 打开这个窗口查看搜索结果。




要在 Vim 中刪除文本，可以使用以下命令：

```vim=
" 删除单个字符
x      " 删除光标所在位置的字符
X      " 删除光标前面的字符（相当于 Backspace 键）

" 删除单词
dw     " 删除光标所在位置到单词末尾的所有字符，包括空格
daw    " 删除光标所在位置的整个单词，包括周围的空格
diw    " 删除光标所在位置的整个单词，但不包括周围的空格

" 删除行
dd     " 删除光标所在行的整行
D      " 删除光标位置到行尾的所有字符

" 删除多行
ndd    " 删除光标下的 n 行（n 为数字）
dG     " 删除光标所在位置到文件末尾的所有行
dgg    " 删除光标所在位置到文件开头的所有行

" 删除文本块
v      " 进入可视模式，然后使用移动键选择文本，再按下 d 删除选定的文本块

```


## 一慮建議刪除或複製使用可視模式
```
v：进入字符选择模式，你可以通过移动光标来选择文本。

Shift + v：进入行选择模式，你可以通过移动光标来选择整行文本。

vw：选择当前光标所在位置的单词。

vb：选择当前光标所在位置到单词开头的文本。

ve：选择当前光标所在位置到单词末尾的文本。

vge：选择当前光标所在位置到上一个单词末尾的文本。

v3w：选择当前光标所在位置开始的三个单词。

v3b：选择当前光标所在位置开始的三个单词（包括当前单词）。

v3e：选择当前光标所在位置开始的三个单词（包括当前单词的末尾）。

v3ge：选择当前光标所在位置开始的三个单词（包括上一个单词的末尾）。

"+y：复制选择的文本到系统剪贴板。
```



## 光標跳轉

```
shift + (：将光标移动到当前句子的开头。
shift + )：将光标移动到当前句子的结尾。
shift + {：将光标移动到当前段落（由空行分隔）的开头。
shift + }：将光标移动到当前段落（由空行分隔）的结尾。


HOME：移动光标到当前行的行首。
END：移动光标到当前行的行尾。
Ctrl + HOME：移动光标到文件的开头。
Ctrl + END：移动光标到文件的末尾。





[m：将光标移动到当前文件的第一个函数或方法的开头。
]m：将光标移动到当前文件的最后一个函数或方法的开头。
[M：将光标移动到当前文件的第一个函数或方法的结尾。
]M：将光标移动到当前文件的最后一个函数或方法的结尾。
[{：将光标移动到当前代码块的开头（大括号 { 所在的位置）。
]}：将光标移动到当前代码块的结尾（大括号 } 所在的位置）。
```









## 超實用功能 大V小v有差別，
v是選擇字
V選擇行

```
可以直接capslock 轉大V，可是這樣效率其實不高。
V  + {
V +  }

V  + (
V +  )


功能一樣

#當前行往上選擇區塊
直接長按shift + v + [ 
直接長按shift + v + ( 

#當前行往下選擇區塊
直接長按shift + v + ]
直接長按shift + v + )


#當前位置往上選擇區塊
v+{   
v+(


#當前位置往下選擇區塊
v+}
v+) 



vip   " 选择当前段落（段落内的文本），包括段落的开头和结尾
V     " 进入行选择模式，选择当前行的整行文本
Ctrl + v  " 进入块选择模式，你可以通过移动光标来选择一个矩形区域
vi"   " 选择双引号内的文本（不包括双引号）
va"   " 选择双引号及其内部的文本（包括双引号）
vi(   " 选择圆括号内的文本（不包括圆括号）
va(   " 选择圆括号及其内部的文本（包括圆括号）
vit   " 选择 HTML 标签内的文本（不包括标签）
vat   " 选择 HTML 标签及其内部的文本（包括标签）
```



## 搜尋字串替換
```
/pattern：在当前文件中向前搜索指定的模式。

?pattern：在当前文件中向后搜索指定的模式。

n：在搜索结果中向前移动到下一个匹配项。

N：在搜索结果中向后移动到上一个匹配项。

:s/pattern/replace/g：在当前行中将匹配的模式替换为指定的文本。

:%s/pattern/replace/g：在整个文件中将匹配的模式替换为指定的文本。


按下enter 後 可以搭配 3n 3N 快速尋找


Neovim 的命令行中输入 :nohlsearch 并按下回车键，或者简写为 :noh（按下 Tab 键可以自动补全命令）

```


## 搜尋字元
```
f{char}：在当前行中向后查找并移动到下一个指定的字符 {char}。例如，fa 将移动光标到当前行中下一个出现的字符 a。

F{char}：在当前行中向前查找并移动到上一个指定的字符 {char}。例如，Fa 将移动光标到当前行中上一个出现的字符 a。

t{char}：在当前行中向后查找并移动到下一个指定字符的前一个字符 {char}。例如，ta 将移动光标到当前行中下一个出现的字符 a 的前一个字符。

T{char}：在当前行中向前查找并移动到上一个指定字符的后一个字符 {char}。例如，Ta 将移动光标到当前行中上一个出现的字符 a 的后一个字符。

; 键：用于重复上一次执行的 f、t 命令。例如，如果你使用 f{char} 命令在当前行中查找并移动到下一个指定的字符 {char}，那么按下 ; 键将会继续查找并移动到下一个相同字符 {char} 的位置。

, 键：用于反向重复上一次执行的 f、t 命令。例如，如果你使用 f{char} 命令在当前行中向后查找并移动到下一个指定的字符 {char}，那么按下 , 键将会反向查找并移动到上一个相同字符 {char} 的位置。
```