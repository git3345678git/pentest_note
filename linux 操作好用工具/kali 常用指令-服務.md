



## 服務

mysql
```
systemctl status mysql

○ mariadb.service - MariaDB 10.6.8 database server
     Loaded: loaded (/lib/systemd/system/mariadb.service; disabled; preset: disabled)
     Active: inactive (dead)
       Docs: man:mariadbd(8)
             https://mariadb.com/kb/en/library/systemd/

```

apache2
```
systemctl status apache2  

● apache2.service - The Apache HTTP Server
     Loaded: loaded (/lib/systemd/system/apache2.service; disabled; preset: disabled)
     Active: active (running) since Tue 2024-03-12 23:52:47 EDT; 1h 0min ago

```


### 自啟動 跟 安裝時預設啟動
這兩個 "disabled" 表示不同的意義：

1. 第一個 "disabled" 是指當前服務的啟用狀態，即服務被禁用，不會在系統啟動時自動啟動。

2. 第二個 "disabled" 是指服務的預設設置，即服務在安裝時就被設置為禁用狀態，系統的預設行為是不自動啟動這個服務。

總的來說，這兩個 "disabled" 都表明了服務的禁用狀態，但是第二個 "disabled" 還表明了這是服務的預設設置。



### 運行狀態

- "inactive (dead)" 表示服務目前處於非運行狀態，即該服務沒有在運行且已停止。這通常表示服務已經啟動過但是當前已經終止了。
- "active (running)" 表示服務目前處於運行狀態，即該服務正在運行中。

這兩個狀態描述了服務的不同運行情況，"inactive (dead)" 表示服務已經停止運行，而 "active (running)" 則表示服務正在運行中。





### 基本運行服務
```
systemctl status apache2
systemctl start apache2
systemctl stop apache2

systemctl is-active apache2
systemctl is-failed apache2
```


### 設置自啟動
```
systemctl is-enabled apache2
sudo systemctl enable apache2
sudo systemctl disable apache2
```


### 查看目前運行的服務(顯示正在運行，或是自啟動但沒運行)
```
# 列出所有服務單元
systemctl list-units --type=service 



兩者差不多等價
# 列出所有正在運行的服務單元
systemctl list-units --type=service --state=running

# 列出所有狀態為啟動中的服務單元
systemctl list-units --type=service --state=active




# 假設你調整了sudo systemctl enable apache2 後並未執行systemctl start apache2
#用下面的指令可以列出自啟動，但沒目運行的服務

兩者差不多等價
# 列出所有狀態為停止中的服務單元
systemctl list-units --type=service --state=dead 

# 列出所有狀態為非運行中的服務單元
systemctl list-units --type=service --state=inactive
```







### 查看所有服務的啟動狀態(這個才會顯示所有的服務)
```
# 列出所有已知的單元文件，包括服務、套件和其他單元文件
systemctl list-unit-files 

# 列出所有已知的服務單元文件，並顯示狀態為禁用的單元文件
systemctl list-unit-files --type=service --state=disabled

# 列出所有已知的服務單元文件，並顯示狀態為啟用的單元文件
systemctl list-unit-files --type=service --state=enabled

```





## 服務目錄


`/lib/systemd/system/` 和 `/etc/systemd/system/` 都是存放 systemd 單元文件的目錄，但它們的作用和使用方式略有不同。

1. **/lib/systemd/system/**：
   - 這個目錄包含系統提供的預設單元文件，通常由系統軟件包安裝。
   - 單元文件放在這裡通常被認為是系統級別的，意味著它們對於所有使用這個系統的用戶都是相同的。
   - 修改這裡的單元文件可能會影響系統的整體行為，因此請小心操作。

2. **/etc/systemd/system/**：
   - 這個目錄是用戶自定義的 systemd 單元文件的推薦存放位置。
   - 單元文件放在這裡通常是由系統管理員或用戶創建的，用於定制或添加特定於用戶的服務。
   - 這個目錄中的單元文件會覆蓋 `/lib/systemd/system/` 目錄中的相同名稱的單元文件，如果有相同名稱的單元存在。

總的來說，當你想要添加自定義的 systemd 單元文件時，應該將它們放置在 `/etc/systemd/system/` 目錄中。這樣做有助於保持系統的整潔和可維護性，並使其易於管理和升級。


## grep 常見服務
```


//查看DB
ls /lib/systemd/system/ | grep -iE 'mysql|postgresql|mongodb|redis|sqlite|mariadb|couchdb|cassandra|elasticsearch|oracle' 




//查看web
ls /lib/systemd/system/ | grep -iE 'apache|nginx|httpd|tomcat|lighttpd'

```



systemctl status mysql
