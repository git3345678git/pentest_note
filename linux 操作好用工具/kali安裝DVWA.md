
# 安裝DVWA


## 目的:
- 在kali 安裝dvwa.com，然後windows 訪問dvwa.com。






## 1

使用 Apache 創建一個名為 `dvwa.com` 的虛擬主機（Virtual Host），然後將 `dvwa` 目錄作為該虛擬主機的 `DocumentRoot`。這樣做可以讓你通過訪問 `http://dvwa.com` 來訪問 `dvwa` 目錄中的內容。

以下是一個設置 Apache 虛擬主機的簡單步驟：

1. 確保 Apache 已經安裝並運行。如果還沒有安裝，你可以通過包管理器進行安裝。例如，在 Ubuntu 上，你可以使用以下命令安裝 Apache：

   ```
   sudo apt update
   sudo apt install apache2
   ```

2. 創建一個名為 `dvwa.com.conf` 的虛擬主機配置文件。你可以在 Apache 的 `sites-available` 目錄中創建這個文件。

   ```
   sudo nano /etc/apache2/sites-available/dvwa.com.conf
   ```

3. 在 `dvwa.com.conf` 文件中，添加以下配置（請替換 `DocumentRoot` 和 `ServerName` 適合你的環境）：

   ```
   <VirtualHost *:80>
       ServerName dvwa.com
       DocumentRoot /path/to/dvwa

       <Directory /path/to/dvwa>
           AllowOverride All
           Require all granted
       </Directory>

       ErrorLog ${APACHE_LOG_DIR}/dvwa.com_error.log
       CustomLog ${APACHE_LOG_DIR}/dvwa.com_access.log combined
   </VirtualHost>
   ```

   請將 `/path/to/dvwa` 替換為你的 `dvwa` 目錄的實際路徑。

4. 啟用虛擬主機並重新啟動 Apache 服務。

   ```
   sudo a2ensite dvwa.com.conf
   sudo systemctl restart apache2
   ```

5. 最後，為了讓你的系統能夠解析 `dvwa.com` 主機名，你需要在你的本地 hosts 文件中添加一個映射。

   ```
   sudo nano /etc/hosts
   ```

   在文件的末尾添加以下行：

   ```
   127.0.0.1 dvwa.com
   ```

   保存文件並退出。

現在，你可以在瀏覽器中訪問 `http://dvwa.com`，應該會看到 `dvwa` 目錄中的內容。




## 2

在一個內部網絡環境中，可以使用主機名（例如 `dvwa.com`）來訪問伺服器，前提是在該網絡中配置了相應的 DNS 或主機名解析。

以下是一些步驟，可以確保在 Windows 上可以使用 `dvwa.com` 主機名來訪問你的 Kali Linux 上的 DVWA：

1. 確保你的 Kali Linux 上已經成功配置了 DVWA，並且可以通過內部網絡 IP 地址訪問。

2. 在你的 Windows 上，打開「控制面板」->「系統和安全」->「管理工具」->「服務」，找到並打開「DNS 客戶端」服務。

3. 打開「控制面板」->「系統和安全」->「管理工具」->「服務」，找到並打開「TCP/IP NetBIOS Helper」服務。

4. 確保你的 Windows 主機和 Kali Linux 主機在同一個局域網中，並且可以通過內部 IP 地址互相訪問。

5. 在 Windows 的 hosts 文件中添加一個主機名到 IP 地址的映射。你可以在 `C:\Windows\System32\drivers\etc` 目錄下找到 `hosts` 文件，用文本編輯器打開它，並添加以下行：

   ```
   192.168.x.x  dvwa.com
   ```

   將 `192.168.x.x` 替換為你 Kali Linux 主機的內部 IP 地址。保存文件並關閉編輯器。

6. 在 Windows 上打開瀏覽器，然後輸入 `http://dvwa.com`，應該能夠訪問到你的 Kali Linux 上的 DVWA 了。

請注意，這些步驟可能因為你的網絡配置而有所不同，如果遇到任何問題，請檢查你的網絡設置，並確保所有設置都是正確的。






## 配置出現錯誤

要打开这些配置，你需要编辑 PHP 的配置文件 `php.ini`。你可以按照以下步骤操作：

1. 找到 `php.ini` 文件。通常情况下，它位于 `/etc/php/{version}/apache2/php.ini`（取决于你的 PHP 版本和服务器配置）。

2. 打开 `php.ini` 文件，并找到相关的配置项：

   - `display_errors` 和 `display_startup_errors` 通常位于文件中的某个位置，你可以搜索这些配置项来找到它们。
   
   - `allow_url_include` 是一个可能不太常见的配置项，你可能需要手动添加它。在文件中搜索 `allow_url_include`，如果找不到，请添加以下行：
     ```
     allow_url_include = On
     ```

3. 修改完成后保存并关闭文件。

4. 重启你的 Web 服务器，以使更改生效。你可以使用以下命令重启 Apache：
   ```
   sudo systemctl restart apache2
   ```






## 文件寫入權限

```
Writable folder /home/kali/Desktop/DVWA/hackable/uploads/: No
Writable folder /home/kali/Desktop/DVWA/config: No
```
要检查Apache用户是否具有写入DVWA目录的权限，你可以执行以下步骤：


1. 查看Apache进程使用的用户和组：
   ```
   ps aux | grep apache
   ```
   或者
   ```
   ps aux | grep httpd
   ```

   这将显示Apache进程的详细信息，包括用户和组。

2. 确定Apache进程使用的用户。通常情况下，Apache进程使用的用户是 `www-data` 或 `apache`。 可以使用 `sudo /etc/passwd` 查看



3. 使用以下命令检查DVWA目录的权限：
   ```
   ls -ld DVWA
   ```

   确保Apache进程使用的用户或组在DVWA目录的所有者或组中。

4. 检查DVWA目录的权限。确保其他用户具有写入权限，例如：
   ```
   drwxr-xr-x 12 kali kali 4096 Mar 13 02:24 DVWA
   ```
   如果其他用户没有写入权限（缺少 `w` 权限），你可以使用以下命令添加写入权限：
   ```
   sudo chmod -R o+w DVWA
   ```

5. 寫入OK
```
drwxr-xrwx 12 kali kali     4096 Mar 13 02:24  DVWA
```